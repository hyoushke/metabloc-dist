import{j as e,r}from"./jsx-runtime-69245957.js";import{u as S,a as T,L as I}from"./app.component-a57b092e.js";import{u as R,M as C,m as n,B as k}from"./messages-list.component-9e674d33.js";import{c as x,I as D}from"./image.component-a5fb66e8.js";import"./index-d77c1b0b.js";import"./index-05b9da0c.js";const L=({screenData:l})=>{if(!l||!l.data||l.data.length===0)return e.jsx("p",{children:"No data available"});const a=l.data.at(-1);a.mode;const s=a.data;return e.jsx(e.Fragment,{children:a&&e.jsx("div",{className:"table-auto",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Campaign ID"}),e.jsx("th",{scope:"col",children:"Campaign Name"}),e.jsx("th",{scope:"col",children:"Clicks"}),e.jsx("th",{scope:"col",children:"Delivery Date"}),e.jsx("th",{scope:"col",children:"From Email"}),e.jsx("th",{scope:"col",children:"From Name"}),e.jsx("th",{scope:"col",children:"Opens"}),e.jsx("th",{scope:"col",children:"Status"})]})}),e.jsx("tbody",{children:s.map((t,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.campaign_id}),e.jsx("td",{children:t.campaign_name}),e.jsx("td",{children:t.clicks}),e.jsx("td",{children:t.delivery_date}),e.jsx("td",{children:t.from_email}),e.jsx("td",{children:t.from_name}),e.jsx("td",{children:t.opens}),e.jsx("td",{children:t.status})]},c))})]})})})},M=()=>{const[l,a]=r.useState([]);return r.useEffect(()=>{(async()=>{try{const t=await fetch("http://ec2-3-25-229-119.ap-southeast-2.compute.amazonaws.com:5000/product/list");if(!t.ok)throw new Error("Failed to fetch products");const c=await t.json();a(c)}catch(t){console.error("Error fetching products:",t)}})()},[]),e.jsxs("div",{children:[e.jsx("h1",{children:"Product List"}),e.jsx("div",{className:"product-list",children:l.map(s=>e.jsxs("div",{className:"product",children:[e.jsx("img",{src:s.image.src,alt:s.title}),e.jsxs("div",{children:[e.jsx("h2",{children:s.title}),e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",s.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," $",s.variants[0].price]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Orders:"})," ",s.analytics.total_orders]})]})]},s.id))}),e.jsx("style",{children:`
        .product-list {
          display: flex;
          flex-wrap: wrap;
          justify-content: space-between; /* Adjust alignment as needed */
        }

        .product {
          width: calc(25% - 20px); /* Adjust width and margins as needed */
          margin: 10px;
          padding: 10px;
          border: 1px solid #ccc;
          box-sizing: border-box;
        }

        .product img {
          max-width: 100%;
          height: auto;
        }
      `})]})},_={hidden:{opacity:1,scale:0},visible:{opacity:1,scale:1,transition:{staggerChildren:.1}}},H={hidden:{y:20,opacity:.5},visible:{y:[0,-5,0],opacity:1,transition:{duration:.5,repeat:Number.POSITIVE_INFINITY,repeatDelay:.5}}},P=64,z=184,Y=()=>{const l={height:"40px",display:"block",backgroundColor:"#e9ffbc",color:"#a3a692",padding:"10px",minWidth:"200px",borderRadius:"5px 5px 0 0",textTransform:"uppercase",textAlign:"center"},a={backgroundColor:"#c9f64b",color:"#606358",fontWeight:"bold"},{loading:s,messages:t,isAuth:c,screenData:h}=S(),[d,p]=r.useState(""),{sendMessage:f}=R(),j=T(),y=!0,g=r.useRef(null),o=r.useRef(null);function b(){o.current&&(o.current.style.height="inherit",o.current.style.height=`${Math.max(o.current.scrollHeight,P)}px`)}function v(){localStorage.getItem(I.accessToken)||j("/auth")}function w(){setTimeout(()=>{var i,u;(u=g.current)==null||u.scrollTo({top:(i=g.current)==null?void 0:i.scrollHeight,behavior:"smooth"})},100)}function m(){d&&(f(d),p(""))}function A(i){i.preventDefault(),m()}function N(i){!i.shiftKey&&i.key==="Enter"&&(i.preventDefault(),m())}r.useEffect(v,[]),r.useEffect(w,[t]),r.useLayoutEffect(b,[d]);const E="assets/robot-sm.webp";return e.jsx(e.Fragment,{children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",gap:"10px",padding:"0 20px 20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"126px",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginRight:"20px",marginLeft:"20px",bottom:"0"},children:[e.jsx("img",{src:"/assets/logo.png",alt:"Logo",style:{width:"120px",marginRight:"20px"}}),e.jsxs("div",{style:{display:"flex",gap:"4px",position:"relative",bottom:0},children:[e.jsx("a",{href:"#",style:l,children:"TASKS"}),e.jsx("a",{href:"#",style:{...l,...a},children:"MARKETING"}),e.jsx("a",{href:"#",style:l,children:"SALES"}),e.jsx("a",{href:"#",style:l,children:"ADVERTISEMENTS"})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx("div",{style:{marginRight:"20px"},children:e.jsx("img",{src:"assets/profile.jpg",alt:"Profile",style:{width:"40px",borderRadius:"50%",marginRight:"10px"}})})})]}),e.jsxs("div",{id:"main",style:{flex:1,display:"flex",gap:"20px",paddingBottom:"20px",overflow:"hidden"},children:[e.jsx("div",{style:{flex:"66%",backgroundColor:"white",color:"black",borderRadius:"15px",marginLeft:"20px",boxShadow:"0 6px 8px rgba(0, 0, 0, 0.1)",overflowY:"auto"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flex:1},children:[h.length===0&&e.jsx(M,{}),h.length>1&&e.jsx(L,{screenData:h})]})})}),e.jsxs("div",{id:"chatbox",style:{flex:"34%",display:"flex",flexDirection:"column",backgroundColor:"white",color:"black",borderRadius:"15px",marginRight:"20px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",position:"relative",paddingBottom:"10%"},children:[e.jsx("div",{id:"header",style:{paddingTop:"10px",color:"#1a96e9",fontSize:"25px",textAlign:"center",fontWeight:"bolder"},children:"CHAT WITH BLOC"}),e.jsx("div",{id:"content",className:"scrollbar",style:{flex:"1",width:"100%",color:"#1a96e9",overflowY:"auto",overflowX:"hidden"},children:e.jsx("div",{style:{display:"flex",flexDirection:"row",width:"100%"},children:e.jsxs("div",{className:"flex flex-1 flex-col justify-end gap-4",children:[e.jsx(C,{messages:t}),s&&e.jsxs(n.div,{animate:{scale:[0,1],transition:{duration:.5}},className:x("flex w-fit flex-row"),children:[e.jsx(k,{}),e.jsx(n.article,{style:{backgroundColor:"#c8f74"},className:"rounded-2xl p-4 text-bot-msg-text",children:e.jsx(n.ul,{className:"flex flex-row gap-2",variants:_,initial:"hidden",animate:"visible",children:[0,1,2].map(i=>e.jsx(n.li,{variants:H,className:"h-3 w-3 rounded-full bg-primary"},i))})})]})]})})}),e.jsxs("div",{style:{paddingTop:"10px",height:"15%",width:"100%",color:"#1a96e9",position:"absolute",bottom:"0",overflow:"hidden"},children:[e.jsx("img",{style:{display:"block",height:"100%",width:"auto"},src:E,alt:"xxx"}),e.jsx("div",{style:{top:"0",right:"0",position:"absolute",zIndex:"99999999",height:"100%",width:"80%",display:"block",paddingRight:"14px",marginRight:"4px",marginBottom:"4px"},children:e.jsxs(n.form,{onSubmit:A,animate:{scaleX:[0,1]},className:x("w-70 relative mt-6 rounded-2xl bg-msg-input-bg",!y),children:[e.jsx("textarea",{ref:o,onKeyDown:N,value:d,onChange:i=>p(i.target.value),className:`w-full resize-none 
                    bg-transparent 
                    p-4 
                    pr-20 text-msg-input-text placeholder:text-msg-input-placeholder focus:outline-none`,placeholder:"Your message",rows:1,style:{maxHeight:z}}),e.jsx("button",{type:"submit",disabled:s,className:x("absolute right-6 top-0 flex h-full items-center active:opacity-50",{"opacity-80 pointer-events-none":s}),children:e.jsx(D,{name:"send",className:"h-10 w-10 rotate-45"})})]})})]})]})]})]})})};export{Y as ChatPage};
