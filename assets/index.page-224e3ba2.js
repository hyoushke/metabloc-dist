import{r as i,j as e}from"./jsx-runtime-69245957.js";import{u as T,a as R,L as S}from"./app.component-ecb131b8.js";import{u as I,M as N,m as l,B as C}from"./messages-list.component-8ac4bb71.js";import{c as d,I as k}from"./image.component-5f8f3b1b.js";import"./index-4369246a.js";import"./index-05b9da0c.js";const D=()=>{const[o,c]=i.useState([]);return i.useEffect(()=>{(async()=>{try{const a=await fetch("http://ec2-13-211-128-136.ap-southeast-2.compute.amazonaws.com:5000/product/list");if(!a.ok)throw new Error("Failed to fetch products");const x=await a.json();c(x)}catch(a){console.error("Error fetching products:",a)}})()},[]),e.jsxs("div",{children:[e.jsx("h1",{children:"Product List"}),e.jsx("div",{className:"product-list",children:o.map(s=>e.jsxs("div",{className:"product",children:[e.jsx("img",{src:s.image.src,alt:s.title}),e.jsxs("div",{children:[e.jsx("h2",{children:s.title}),e.jsxs("p",{children:["ID: ",s.id]}),e.jsxs("p",{children:["Price: $",s.variants[0].price]})]})]},s.id))}),e.jsx("style",{children:`
        .product-list {
          display: flex;
          flex-wrap: wrap;
          justify-content: space-between; /* Adjust alignment as needed */
        }

        .product {
          width: calc(25% - 20px); /* Adjust width and margins as needed */
          margin: 10px;
          padding: 10px;
          border: 1px solid #ccc;
          box-sizing: border-box;
        }

        .product img {
          max-width: 100%;
          height: auto;
        }
      `})]})},L={hidden:{opacity:1,scale:0},visible:{opacity:1,scale:1,transition:{staggerChildren:.1}}},H={hidden:{y:20,opacity:.5},visible:{y:[0,-5,0],opacity:1,transition:{duration:.5,repeat:Number.POSITIVE_INFINITY,repeatDelay:.5}}},M=64,P=184,F=()=>{const o={height:"40px",display:"block",backgroundColor:"#e9ffbc",color:"#a3a692",padding:"10px",minWidth:"200px",borderRadius:"5px 5px 0 0",textTransform:"uppercase",textAlign:"center"},c={backgroundColor:"#c9f64b",color:"#606358",fontWeight:"bold"},{loading:s,messages:a,isAuth:x}=T(),[n,p]=i.useState(""),{sendMessage:f}=I(),m=R(),y=!0,h=i.useRef(null),r=i.useRef(null);function j(){r.current&&(r.current.style.height="inherit",r.current.style.height=`${Math.max(r.current.scrollHeight,M)}px`)}function b(){localStorage.getItem(S.accessToken)||m("/auth")}function v(){setTimeout(()=>{var t,u;(u=h.current)==null||u.scrollTo({top:(t=h.current)==null?void 0:t.scrollHeight,behavior:"smooth"})},100)}function g(){n&&(f(n),p(""))}function w(t){t.preventDefault(),g()}function A(t){!t.shiftKey&&t.key==="Enter"&&(t.preventDefault(),g())}i.useEffect(b,[]),i.useEffect(v,[a]),i.useLayoutEffect(j,[n]);const E="assets/robot-sm.webp";return e.jsx(e.Fragment,{children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100vh",gap:"10px",padding:"0 20px 20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"126px",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginRight:"20px",marginLeft:"20px",bottom:"0"},children:[e.jsx("img",{src:"/assets/logo.png",alt:"Logo",style:{width:"120px",marginRight:"20px"}}),e.jsxs("div",{style:{display:"flex",gap:"4px",position:"relative",bottom:0},children:[e.jsx("a",{href:"#",style:o,children:"TASKS"}),e.jsx("a",{href:"#",style:{...o,...c},children:"MARKETING"}),e.jsx("a",{href:"#",style:o,children:"SALES"}),e.jsx("a",{href:"#",style:o,children:"ADVERTISEMENTS"})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx("div",{style:{marginRight:"20px"},children:e.jsx("img",{src:"assets/profile.jpg",alt:"Profile",style:{width:"40px",borderRadius:"50%",marginRight:"10px"}})})})]}),e.jsxs("div",{id:"main",style:{flex:1,display:"flex",gap:"20px",paddingBottom:"20px",overflow:"hidden"},children:[e.jsx("div",{style:{flex:"66%",backgroundColor:"white",color:"black",borderRadius:"15px",marginLeft:"20px",boxShadow:"0 6px 8px rgba(0, 0, 0, 0.1)"},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:e.jsx("div",{style:{display:"flex",justifyContent:"space-between",flex:1},children:e.jsx(D,{})})})}),e.jsxs("div",{id:"chatbox",style:{flex:"34%",display:"flex",flexDirection:"column",backgroundColor:"white",color:"black",borderRadius:"15px",marginRight:"20px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",position:"relative",paddingBottom:"10%"},children:[e.jsx("div",{id:"header",style:{paddingTop:"10px",color:"#1a96e9",fontSize:"25px",textAlign:"center",fontWeight:"bolder"},children:"CHAT WITH BLOC"}),e.jsx("div",{id:"content",className:"scrollbar",style:{flex:"1",width:"100%",color:"#1a96e9",overflowY:"auto",overflowX:"hidden"},children:e.jsx("div",{style:{display:"flex",flexDirection:"row",width:"100%"},children:e.jsxs("div",{className:"flex flex-1 flex-col justify-end gap-4",children:[e.jsx(N,{messages:a}),s&&e.jsxs(l.div,{animate:{scale:[0,1],transition:{duration:.5}},className:d("flex w-fit flex-row"),children:[e.jsx(C,{}),e.jsx(l.article,{style:{backgroundColor:"#c8f74"},className:"rounded-2xl p-4 text-bot-msg-text",children:e.jsx(l.ul,{className:"flex flex-row gap-2",variants:L,initial:"hidden",animate:"visible",children:[0,1,2].map(t=>e.jsx(l.li,{variants:H,className:"h-3 w-3 rounded-full bg-primary"},t))})})]})]})})}),e.jsxs("div",{style:{paddingTop:"10px",height:"15%",width:"100%",color:"#1a96e9",position:"absolute",bottom:"0",overflow:"hidden"},children:[e.jsx("img",{style:{display:"block",height:"100%",width:"auto"},src:E,alt:"xxx"}),e.jsx("div",{style:{top:"0",right:"0",position:"absolute",zIndex:"99999999",height:"100%",width:"80%",display:"block",paddingRight:"14px",marginRight:"4px",marginBottom:"4px"},children:e.jsxs(l.form,{onSubmit:w,animate:{scaleX:[0,1]},className:d("w-70 relative mt-6 rounded-2xl bg-msg-input-bg",!y),children:[e.jsx("textarea",{ref:r,onKeyDown:A,value:n,onChange:t=>p(t.target.value),className:`w-full resize-none 
                    bg-transparent 
                    p-4 
                    pr-20 text-msg-input-text placeholder:text-msg-input-placeholder focus:outline-none`,placeholder:"Your message",rows:1,style:{maxHeight:P}}),e.jsx("button",{type:"submit",disabled:s,className:d("absolute right-6 top-0 flex h-full items-center active:opacity-50",{"opacity-80 pointer-events-none":s}),children:e.jsx(k,{name:"send",className:"h-10 w-10 rotate-45"})})]})})]})]})]})]})})};export{F as ChatPage};
